(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{3911:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return g}});var t=r(29),a=r(7794),s=r.n(a),u=r(7294),o=r(1163),i=r(7376),c=r.n(i),p=r(712),h=r(7013),l=r(5893);var d=r(371),f=r(3404),m=r(4158);r(4935);function g(){var e=(0,o.useRouter)(),n=(0,u.useState)(!1),r=n[0],a=n[1],i=(0,u.useState)(!0),g=i[0],_=i[1],x=(0,u.useState)(""),b=x[0],k=x[1],v=(0,u.useState)(""),w=v[0],j=v[1],N=(0,u.useState)([]),C=N[0],S=N[1];function y(){var e=[];return b.length<3&&e.push("Username length must not be less than 3"),w.length<10&&e.push("Password length must not be less than 10"),(b.length>32||w.length>32)&&e.push("Username or password length must not be morethan 32"),S(e),e.length}function W(e){return E.apply(this,arguments)}function E(){return(E=(0,t.Z)(s().mark((function n(t){var a,u,o,i,c;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===t||void 0===t||t.preventDefault(),a={username:b,password:w},!r){n.next=10;break}if(!(y()>0)){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,(0,d.Al)(a);case 8:200!==(u=n.sent).status?(o=[],400===u.status?1062===u.data.Number?o.push("Username already taken"):o.push("Invalid password"):o.push("Server error, please try again."),S(o)):200===u.status&&(localStorage.setItem("auth",JSON.stringify({isLoggedIn:!0})),e.push("/dashboard"));case 10:if(r){n.next=28;break}if(!(y()>0)){n.next=14;break}return n.abrupt("return");case 14:return n.next=16,(0,d.Yn)(a);case 16:if(200===(i=n.sent).status){n.next=23;break}(c=[]).push("Username and password do not match"),S(c),n.next=28;break;case 23:if(200!==i.status){n.next=28;break}return n.next=26,localStorage.setItem("auth",JSON.stringify({isLoggedIn:!0}));case 26:return n.next=28,e.push("/dashboard");case 28:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function I(){return(I=(0,t.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.df)();case 2:if(200!==n.sent.status){n.next=5;break}return n.abrupt("return",e.push("/dashboard"));case 5:_(!1);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,u.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]),(0,l.jsx)("div",{className:c().pageWrapper,children:g?(0,l.jsx)(m.Z,{}):(0,l.jsxs)("div",{className:c().pageContainer,children:[(0,l.jsx)("a",{className:c().logoContainer,href:"/",children:(0,l.jsx)(p.$G,{})}),(0,l.jsx)("div",{className:c().formWrapper,children:(0,l.jsxs)("form",{className:c().formContainer,onSubmit:W,children:[(0,l.jsx)("h2",{children:r?"Register an account":"Sign in to your account"}),C.length>0&&(0,l.jsx)("div",{className:c().errorWrapper,children:C.map((function(e,n){return(0,l.jsx)("h4",{children:e},n)}))}),(0,l.jsx)(h.oi,{value:b,setValue:k,title:"Username",minLength:"3",required:!0}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h.oi,{value:w,setValue:j,title:"Password",type:"password",minLength:"10",required:!0}),(0,l.jsxs)("p",{className:c().changeFormBtn,onClick:function(){k(""),j(""),S([]),_(!0),a((function(e){return!e})),setTimeout((function(){_(!1)}),500)},children:[r?"Sign in to your account":"Register an account",(0,l.jsx)(p.wp,{})]})]}),(0,l.jsx)(h.zx,{primary:!0,onClick:W,children:"Continue"})]})})]})})}},9221:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return r(3911)}])},7376:function(e){e.exports={pageWrapper:"auth_pageWrapper___cz9h",pageContainer:"auth_pageContainer__koZi5",logoContainer:"auth_logoContainer__ttST3",formWrapper:"auth_formWrapper__xmEEq",formContainer:"auth_formContainer__w6MVK",changeFormBtn:"auth_changeFormBtn__48XXD",loadingWrapper:"auth_loadingWrapper__RLkxz",errorWrapper:"auth_errorWrapper__kwXMq"}}},function(e){e.O(0,[885,75,390,260,721,774,888,179],(function(){return n=9221,e(e.s=n);var n}));var n=e.O();_N_E=n}]);